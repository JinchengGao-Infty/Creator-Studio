# T2.6 集成验证：切换 Provider 并调用模型

## 目标

验证 Provider 配置 UI 和模型参数 UI 能正常工作，确保：
1. 能添加/编辑 Provider
2. 能获取模型列表
3. 能切换 Provider 和模型
4. 能调整参数并生效
5. AI 调用正常响应

## 测试 API

```
Base URL: http://127.0.0.1:3002/geminicli/v1
API Key: sk-XnbHbzBOmPYGHgL_4Mg8zRcoBIb2gVpJiuO0eSifyyCUV2Twz2c4SljcNCo
Model: gemini-3-flash-preview
Provider Type: openai-compatible
```

## 验证步骤

### 1. 启动应用
```bash
cd /Users/link/Desktop/CreatorAI-v2
npm run tauri dev
```

### 2. 进入设置页
- 点击顶部 Tab「设置」
- 应该看到「Provider 配置」和「模型参数」两个子 Tab

### 3. 添加 Provider
- 在「Provider 配置」Tab 中添加新 Provider：
  - 名称：`Gemini Local`
  - Base URL：`http://127.0.0.1:3002/geminicli/v1`
  - API Key：`sk-XnbHbzBOmPYGHgL_4Mg8zRcoBIb2gVpJiuO0eSifyyCUV2Twz2c4SljcNCo`
  - Provider Type：`openai-compatible`
- 保存

### 4. 获取模型列表
- 点击「刷新模型」按钮
- 应该能获取到模型列表（至少包含 `gemini-3-flash-preview`）
- 如果获取失败，记录错误信息

### 5. 配置模型参数
- 切换到「模型参数」Tab
- 选择模型：`gemini-3-flash-preview`
- 调整 Temperature：0.7
- 调整 Max Tokens：2000
- 保存参数

### 6. 测试 AI 调用
- 切换回「测试」Tab
- 发送消息：`你好，请简单介绍一下你自己`
- 验证能收到正常响应

### 7. 验证参数生效
- 回到设置页，把 Temperature 改成 0.1
- 再发送同样的消息
- 观察响应是否更加确定性（不那么随机）

## 验收标准

- [ ] Provider 能正常添加和保存
- [ ] 模型列表能正常获取（或有合理的错误提示）
- [ ] 模型参数能正常保存
- [ ] AI 调用能正常响应
- [ ] 参数修改能生效

## 输出要求

完成后，在 `/Users/link/Desktop/CreatorAI-v2/docs/T2.6-验证报告.md` 中记录：
1. 每个步骤的测试结果（✅ 通过 / ❌ 失败）
2. 遇到的问题和错误信息
3. 如果有 Bug，简要描述现象和可能原因

## 注意事项

- 如果 UI 有明显问题（如按钮不工作、数据不保存），记录下来但不需要修复
- 重点是验证流程是否跑通，不是修 Bug
- 如果模型列表获取失败，可以手动输入模型名称继续测试

---

*任务创建时间：2026-02-02*
